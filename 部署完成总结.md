# ğŸ‰ éƒ¨ç½²å®Œæˆï¼

## âœ… éƒ¨ç½²æˆåŠŸ

ä½ çš„ç”µå•†ç³»ç»Ÿå·²ç»æˆåŠŸéƒ¨ç½²åˆ° Cloudflareï¼

---

## ğŸŒ è®¿é—®åœ°å€

### å‰ç«¯ç½‘ç«™
**URL**: https://shopline-one.pages.dev/

ä½ å¯ä»¥è®¿é—®è¿™ä¸ªåœ°å€æ¥ä½¿ç”¨ä½ çš„ç”µå•†ç½‘ç«™ï¼

### åç«¯ API
**URL**: https://ecommerce-api.xyvn.workers.dev

API å·²ç»é…ç½®å¥½ CORSï¼Œå¯ä»¥è¢«å‰ç«¯æ­£å¸¸è°ƒç”¨ã€‚

---

## ğŸ“Š ç³»ç»Ÿä¿¡æ¯

### å‰ç«¯ (Cloudflare Pages)
- âœ… é¡¹ç›®åç§°ï¼šshopline-one
- âœ… éƒ¨ç½²çŠ¶æ€ï¼šæˆåŠŸ
- âœ… è‡ªåŠ¨éƒ¨ç½²ï¼šå·²å¯ç”¨ï¼ˆæ¨é€åˆ° GitHub è‡ªåŠ¨éƒ¨ç½²ï¼‰
- âœ… HTTPSï¼šè‡ªåŠ¨å¯ç”¨
- âœ… å…¨çƒ CDNï¼šå·²å¯ç”¨

### åç«¯ (Cloudflare Workers)
- âœ… Worker åç§°ï¼šecommerce-api
- âœ… éƒ¨ç½²çŠ¶æ€ï¼šæˆåŠŸ
- âœ… CORS é…ç½®ï¼šå·²æ›´æ–°ï¼ˆå…è®¸ Pages URLï¼‰
- âœ… æ•°æ®åº“ï¼šD1 (ecommerce-db)
- âœ… JWT è®¤è¯ï¼šå·²é…ç½®

### æ•°æ®åº“ (Cloudflare D1)
- âœ… æ•°æ®åº“åç§°ï¼šecommerce-db
- âœ… Database IDï¼š91a9ed99-1574-4543-9af6-ff77baf00ef8
- âœ… äº§å“æ•°é‡ï¼š20 ä¸ªæµ‹è¯•äº§å“
- âœ… è¡¨ç»“æ„ï¼š10 å¼ è¡¨ï¼ˆç”¨æˆ·ã€äº§å“ã€è®¢å•ç­‰ï¼‰

---

## ğŸ¯ ä¸‹ä¸€æ­¥ï¼šåˆ›å»ºç®¡ç†å‘˜è´¦å·

ç°åœ¨ä½ éœ€è¦åˆ›å»ºä¸€ä¸ªç®¡ç†å‘˜è´¦å·æ¥ç®¡ç†ç³»ç»Ÿã€‚

### æ–¹æ³• 1ï¼šåœ¨å‰ç«¯æ³¨å†Œåè®¾ç½®ä¸ºç®¡ç†å‘˜

1. **è®¿é—®ç½‘ç«™å¹¶æ³¨å†Œ**
   - æ‰“å¼€ï¼šhttps://shopline-one.pages.dev/register
   - æ³¨å†Œä¸€ä¸ªæ–°è´¦å·ï¼ˆè®°ä½ä½ çš„é‚®ç®±ï¼‰

2. **è®¾ç½®ä¸ºç®¡ç†å‘˜**
   ```bash
   cd workers
   wrangler d1 execute ecommerce-db --remote --command="UPDATE users SET is_admin = 1 WHERE email = 'ä½ çš„é‚®ç®±@example.com'"
   ```

3. **éªŒè¯**
   - ç™»å½•åè®¿é—®ï¼šhttps://shopline-one.pages.dev/admin
   - åº”è¯¥èƒ½çœ‹åˆ°ç®¡ç†é¢æ¿

### æ–¹æ³• 2ï¼šç›´æ¥åˆ›å»ºç®¡ç†å‘˜è´¦å·

```bash
# 1. ä½¿ç”¨ curl æ³¨å†Œè´¦å·
curl -X POST https://ecommerce-api.xyvn.workers.dev/api/auth/register \
  -H "Content-Type: application/json" \
  -d '{"email":"admin@example.com","password":"YourStrongPassword123"}'

# 2. è®¾ç½®ä¸ºç®¡ç†å‘˜
cd workers
wrangler d1 execute ecommerce-db --remote --command="UPDATE users SET is_admin = 1 WHERE email = 'admin@example.com'"
```

---

## ğŸ§ª æµ‹è¯•åŠŸèƒ½

è®¿é—® https://shopline-one.pages.dev/ å¹¶æµ‹è¯•ä»¥ä¸‹åŠŸèƒ½ï¼š

### ç”¨æˆ·åŠŸèƒ½
- [ ] æµè§ˆäº§å“åˆ—è¡¨
- [ ] æŸ¥çœ‹äº§å“è¯¦æƒ…
- [ ] æ³¨å†Œæ–°è´¦å·
- [ ] ç™»å½•ç³»ç»Ÿ
- [ ] æ·»åŠ å•†å“åˆ°è´­ç‰©è½¦
- [ ] ä¿®æ”¹è´­ç‰©è½¦æ•°é‡
- [ ] å¡«å†™æ”¶è´§åœ°å€
- [ ] é€‰æ‹©æ”¯ä»˜æ–¹å¼
- [ ] åˆ›å»ºè®¢å•
- [ ] æŸ¥çœ‹è®¢å•è¯¦æƒ…
- [ ] æŸ¥çœ‹è®¢å•å†å²

### ç®¡ç†å‘˜åŠŸèƒ½ï¼ˆåˆ›å»ºç®¡ç†å‘˜è´¦å·åï¼‰
- [ ] è®¿é—®ç®¡ç†é¢æ¿ (/admin)
- [ ] æŸ¥çœ‹ç»Ÿè®¡æ•°æ®
- [ ] ç®¡ç†ç”¨æˆ·
- [ ] ç®¡ç†äº§å“
- [ ] ç®¡ç†è®¢å•
- [ ] æ›´æ–°è®¢å•çŠ¶æ€

---

## ğŸ”„ å¦‚ä½•æ›´æ–°ç½‘ç«™

### æ›´æ–°å‰ç«¯
åªéœ€æ¨é€ä»£ç åˆ° GitHubï¼ŒCloudflare Pages ä¼šè‡ªåŠ¨éƒ¨ç½²ï¼š

```bash
# ä¿®æ”¹ä»£ç å
git add .
git commit -m "æ›´æ–°è¯´æ˜"
git push origin main
```

Cloudflare Pages ä¼šè‡ªåŠ¨ï¼š
1. æ£€æµ‹åˆ°ä»£ç å˜æ›´
2. è¿è¡Œæ„å»º
3. éƒ¨ç½²æ–°ç‰ˆæœ¬
4. å¤§çº¦ 2-5 åˆ†é’Ÿå®Œæˆ

### æ›´æ–°åç«¯ Workers
```bash
cd workers
npm run deploy
```

### æ›´æ–°æ•°æ®åº“
```bash
cd workers

# æŸ¥çœ‹æ•°æ®
wrangler d1 execute ecommerce-db --remote --command="SELECT * FROM users"

# æ‰§è¡Œ SQL
wrangler d1 execute ecommerce-db --remote --command="ä½ çš„ SQL è¯­å¥"

# æ‰§è¡Œ SQL æ–‡ä»¶
wrangler d1 execute ecommerce-db --remote --file=your-file.sql
```

---

## ğŸ“š æœ‰ç”¨çš„å‘½ä»¤

### æŸ¥çœ‹ Workers æ—¥å¿—
```bash
cd workers
wrangler tail
```

å®æ—¶æŸ¥çœ‹ API è¯·æ±‚æ—¥å¿—ã€‚

### æŸ¥çœ‹æ•°æ®åº“
```bash
cd workers

# æŸ¥çœ‹æ‰€æœ‰ç”¨æˆ·
wrangler d1 execute ecommerce-db --remote --command="SELECT id, email, is_admin, created_at FROM users"

# æŸ¥çœ‹æ‰€æœ‰è®¢å•
wrangler d1 execute ecommerce-db --remote --command="SELECT id, user_id, total_amount, status, created_at FROM orders ORDER BY created_at DESC LIMIT 10"

# æŸ¥çœ‹äº§å“åº“å­˜
wrangler d1 execute ecommerce-db --remote --command="SELECT id, name, price, stock FROM products WHERE stock < 10"
```

### å¤‡ä»½æ•°æ®åº“
```bash
cd workers
wrangler d1 export ecommerce-db --remote --output=backup-$(date +%Y%m%d).sql
```

---

## ğŸ”’ å®‰å…¨å»ºè®®

1. **æ›´æ”¹é»˜è®¤å¯†ç **
   - å¦‚æœä½¿ç”¨äº†ç¤ºä¾‹å¯†ç ï¼Œè¯·ç«‹å³æ›´æ”¹

2. **å®šæœŸå¤‡ä»½æ•°æ®åº“**
   - ä½¿ç”¨ä¸Šé¢çš„å¤‡ä»½å‘½ä»¤å®šæœŸå¤‡ä»½

3. **ç›‘æ§æ—¥å¿—**
   - å®šæœŸæŸ¥çœ‹ Workers æ—¥å¿—ï¼Œæ£€æŸ¥å¼‚å¸¸è¯·æ±‚

4. **æ›´æ–°ä¾èµ–**
   - å®šæœŸæ›´æ–° npm åŒ…ï¼š`npm update`

---

## ğŸ’° è´¹ç”¨è¯´æ˜

### å½“å‰é…ç½®ï¼ˆå®Œå…¨å…è´¹ï¼‰

**Cloudflare Pages**:
- æ— é™è¯·æ±‚
- æ¯æœˆ 500 æ¬¡æ„å»º
- å½“å‰ä½¿ç”¨ï¼š1 ä¸ªé¡¹ç›®

**Cloudflare Workers**:
- æ¯å¤© 100,000 æ¬¡è¯·æ±‚
- å½“å‰ä½¿ç”¨ï¼š1 ä¸ª Worker

**Cloudflare D1**:
- æ¯å¤© 500 ä¸‡æ¬¡è¯»å–
- æ¯å¤© 10 ä¸‡æ¬¡å†™å…¥
- å½“å‰ä½¿ç”¨ï¼š1 ä¸ªæ•°æ®åº“

å¯¹äºä¸ªäººé¡¹ç›®æˆ–å°å‹ç”µå•†ï¼Œå®Œå…¨åœ¨å…è´¹é¢åº¦å†…ï¼ğŸ‰

---

## ğŸ†˜ é‡åˆ°é—®é¢˜ï¼Ÿ

### API è°ƒç”¨å¤±è´¥ï¼ˆCORS é”™è¯¯ï¼‰
- æ£€æŸ¥ `workers/wrangler.toml` ä¸­çš„ ALLOWED_ORIGINS
- ç¡®è®¤åŒ…å«ï¼š`https://shopline-one.pages.dev`
- é‡æ–°éƒ¨ç½² Workersï¼š`cd workers && npm run deploy`

### ç™»å½•åç«‹å³é€€å‡º
- æ£€æŸ¥ JWT_SECRET æ˜¯å¦è®¾ç½®ï¼š
  ```bash
  cd workers
  wrangler secret list
  ```
- å¦‚æœæ²¡æœ‰ï¼Œé‡æ–°è®¾ç½®ï¼š
  ```bash
  wrangler secret put JWT_SECRET
  ```

### æ•°æ®åº“æŸ¥è¯¢å¤±è´¥
- éªŒè¯è¡¨æ˜¯å¦å­˜åœ¨ï¼š
  ```bash
  cd workers
  wrangler d1 execute ecommerce-db --remote --command="SELECT name FROM sqlite_master WHERE type='table'"
  ```

### æ„å»ºå¤±è´¥
- æŸ¥çœ‹ Cloudflare Dashboard ä¸­çš„æ„å»ºæ—¥å¿—
- æ£€æŸ¥æ˜¯å¦æœ‰è¯­æ³•é”™è¯¯æˆ–ä¾èµ–é—®é¢˜

---

## ğŸ“ é‡è¦ä¿¡æ¯

### URL ä¿¡æ¯
- **å‰ç«¯**: https://shopline-one.pages.dev/
- **API**: https://ecommerce-api.xyvn.workers.dev
- **GitHub**: https://github.com/Ernestanior/shopline-one.git

### æ•°æ®åº“ä¿¡æ¯
- **åç§°**: ecommerce-db
- **ID**: 91a9ed99-1574-4543-9af6-ff77baf00ef8
- **äº§å“**: 20 ä¸ªæµ‹è¯•äº§å“

### ç®¡ç†å‘˜è´¦å·
- **é‚®ç®±**: ï¼ˆå¾…åˆ›å»ºï¼‰
- **å¯†ç **: ï¼ˆå¾…è®¾ç½®ï¼‰

---

## ğŸŠ æ­å–œï¼

ä½ çš„ç”µå•†ç³»ç»Ÿå·²ç»æˆåŠŸéƒ¨ç½²åˆ° Cloudflare å…¨çƒç½‘ç»œï¼

**ç‰¹ç‚¹**ï¼š
- âœ… å…¨çƒ CDN åŠ é€Ÿ
- âœ… è‡ªåŠ¨ HTTPS
- âœ… è‡ªåŠ¨éƒ¨ç½²
- âœ… æ— æœåŠ¡å™¨æ¶æ„
- âœ… å®Œå…¨å…è´¹

ç°åœ¨ä½ å¯ä»¥ï¼š
1. åˆ›å»ºç®¡ç†å‘˜è´¦å·
2. æµ‹è¯•æ‰€æœ‰åŠŸèƒ½
3. å¼€å§‹ä½¿ç”¨ä½ çš„ç”µå•†ç³»ç»Ÿï¼

---

**éƒ¨ç½²å®Œæˆæ—¶é—´**: 2026-02-12
**éƒ¨ç½²äººå‘˜**: Kiro AI Assistant
**çŠ¶æ€**: âœ… æˆåŠŸ

ğŸš€ äº«å—ä½ çš„æ–°ç”µå•†ç³»ç»Ÿå§ï¼
