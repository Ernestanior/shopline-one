# 用户账户系统手动测试指南

## 前提条件

1. 启动后端服务器：
```bash
node server/index.js
```
服务器应该运行在 http://localhost:5002

2. 启动前端服务器：
```bash
cd client
npm start
```
前端应该运行在 http://localhost:3001

## 测试流程

### 1. 用户注册和登录

#### 1.1 注册新用户
1. 访问 http://localhost:3001/login
2. 点击"注册"标签
3. 输入邮箱和密码
4. 点击"注册"按钮
5. ✅ 验证：成功注册并自动登录

#### 1.2 验证登录状态
1. 查看页面右上角
2. ✅ 验证：显示用户邮箱和"我的账户"链接

### 2. 地址管理测试

#### 2.1 进入账户页面
1. 点击右上角"我的账户"
2. ✅ 验证：进入账户页面，显示4个标签

#### 2.2 添加第一个地址（默认）
1. 点击"收货地址"标签
2. 点击"+ 添加新地址"按钮
3. 填写表单：
   - 地址标签：家
   - 名：测试
   - 姓：用户
   - 电话：+886912345678
   - 国家/地区：Taiwan
   - 城市：Taipei
   - 地址：信义路五段7号
   - 地址2：101大楼
   - 邮编：110
   - ✅ 勾选"设为默认地址"
4. 点击"保存"
5. ✅ 验证：
   - 模态框关闭
   - 地址列表显示新地址
   - 显示"默认"标签

#### 2.3 添加第二个地址（非默认）
1. 再次点击"+ 添加新地址"
2. 填写不同的地址信息
3. 不勾选"设为默认地址"
4. 点击"保存"
5. ✅ 验证：
   - 显示2个地址
   - 只有第一个显示"默认"标签

#### 2.4 编辑地址
1. 点击第一个地址的"编辑"按钮
2. 修改城市为"Kaohsiung"
3. 修改地址为"中正四路211号"
4. 点击"保存"
5. ✅ 验证：地址信息已更新

#### 2.5 删除地址
1. 点击第二个地址的"删除"按钮
2. 确认删除
3. ✅ 验证：地址已从列表中移除

### 3. 支付方式管理测试

#### 3.1 添加第一个支付方式（默认）
1. 点击"支付方式"标签
2. 点击"+ 添加支付方式"按钮
3. 填写表单：
   - 卡类型：Visa
   - 卡号：4242 4242 4242 4242
   - 持卡人姓名：测试用户
   - 有效期：12/2028
   - CVV：123
   - ✅ 勾选"设为默认支付方式"
4. 点击"保存"
5. ✅ 验证：
   - 模态框关闭
   - 支付方式列表显示新卡
   - 显示"默认"标签
   - 只显示后4位：****4242

#### 3.2 添加第二个支付方式（非默认）
1. 再次点击"+ 添加支付方式"
2. 填写不同的卡信息（Mastercard）
3. 不勾选"设为默认支付方式"
4. 点击"保存"
5. ✅ 验证：
   - 显示2个支付方式
   - 只有第一个显示"默认"标签

#### 3.3 删除支付方式
1. 点击第二个支付方式的"删除"按钮
2. 确认删除
3. ✅ 验证：支付方式已从列表中移除

### 4. 订单历史测试

#### 4.1 查看空订单列表
1. 点击"订单历史"标签
2. ✅ 验证：显示"暂无订单"提示

#### 4.2 创建订单
1. 访问商品页面
2. 添加商品到购物车
3. 进入购物车
4. 点击"结账"
5. 完成结账流程
6. ✅ 验证：订单创建成功

#### 4.3 查看订单历史
1. 返回"我的账户" → "订单历史"
2. ✅ 验证：
   - 显示刚创建的订单
   - 显示订单号
   - 显示订单状态（带颜色）
   - 显示订单金额
   - 显示商品数量

### 5. 结账自动填充测试

#### 5.1 验证自动填充
1. 添加商品到购物车
2. 进入结账页面
3. ✅ 验证第一步（Contact information）：
   - 显示绿色提示框："已登录为 [邮箱]"
   - 邮箱字段自动填充
   - 电话字段自动填充（如果地址中有）

4. 点击"Continue"进入第二步
5. ✅ 验证第二步（Shipping address）：
   - 显示绿色提示框："使用默认地址"
   - 所有地址字段自动填充
   - 姓名、城市、地址、邮编等都已填写

6. 点击"Continue"进入第三步
7. ✅ 验证第三步（Payment details）：
   - 卡号字段显示：•••• •••• •••• 4242
   - 持卡人姓名已填充
   - 有效期已填充
   - CVV显示：•••

#### 5.2 修改自动填充的信息
1. 在第二步修改城市为其他值
2. 点击"Continue"
3. ✅ 验证：使用修改后的信息

#### 5.3 完成订单
1. 完成所有步骤
2. 点击"Place order"
3. ✅ 验证：订单创建成功

### 6. 个人信息页面测试

#### 6.1 查看个人信息
1. 点击"个人信息"标签
2. ✅ 验证：
   - 显示邮箱地址
   - 显示账户类型（普通用户/管理员）
   - 显示账户状态（活跃）

#### 6.2 管理员功能（如果是管理员）
1. 如果显示管理员权限提示
2. ✅ 验证：显示"进入管理后台"按钮
3. 点击按钮
4. ✅ 验证：跳转到管理后台

### 7. 响应式设计测试

#### 7.1 移动端测试
1. 打开浏览器开发者工具
2. 切换到移动设备视图（iPhone/Android）
3. 重复以上所有测试
4. ✅ 验证：
   - 模态框全屏显示
   - 表单布局适配移动端
   - 按钮大小适合触摸
   - 所有功能正常工作

### 8. 边界情况测试

#### 8.1 表单验证
1. 尝试提交空表单
2. ✅ 验证：显示必填字段错误

#### 8.2 卡号验证
1. 输入少于16位的卡号
2. ✅ 验证：显示错误提示

#### 8.3 CVV验证
1. 输入少于3位的CVV
2. ✅ 验证：显示错误提示

#### 8.4 删除默认地址
1. 尝试删除默认地址
2. ✅ 验证：可以删除（或提示设置其他地址为默认）

### 9. 退出登录测试

#### 9.1 退出登录
1. 点击"退出登录"按钮
2. ✅ 验证：
   - 返回首页
   - 右上角显示"登录"链接
   - 无法访问账户页面

#### 9.2 重新登录
1. 再次登录
2. 进入账户页面
3. ✅ 验证：
   - 之前添加的地址仍然存在
   - 之前添加的支付方式仍然存在
   - 订单历史仍然存在

## 测试检查清单

### 地址管理
- [ ] 添加地址成功
- [ ] 编辑地址成功
- [ ] 删除地址成功
- [ ] 设置默认地址成功
- [ ] 地址列表正确显示
- [ ] 默认标签正确显示

### 支付方式管理
- [ ] 添加支付方式成功
- [ ] 删除支付方式成功
- [ ] 设置默认支付方式成功
- [ ] 支付方式列表正确显示
- [ ] 只显示卡号后4位
- [ ] 默认标签正确显示

### 结账自动填充
- [ ] 邮箱自动填充
- [ ] 地址自动填充
- [ ] 支付方式自动填充
- [ ] 显示自动填充提示
- [ ] 可以修改自动填充的信息

### 订单历史
- [ ] 显示订单列表
- [ ] 订单状态正确显示
- [ ] 订单金额正确显示
- [ ] 空状态正确显示

### UI/UX
- [ ] 模态框正确打开/关闭
- [ ] 表单验证正确工作
- [ ] 错误提示正确显示
- [ ] 加载状态正确显示
- [ ] 响应式设计正常工作

### 安全性
- [ ] 未登录无法访问账户页面
- [ ] 未登录无法访问API
- [ ] 不存储完整卡号
- [ ] 不存储CVV

## 预期结果

所有测试项目都应该通过 ✅

如果发现任何问题，请记录：
1. 问题描述
2. 重现步骤
3. 预期行为
4. 实际行为
5. 截图（如果适用）

## 自动化测试

如果服务器正在运行，可以运行自动化测试：

```bash
node test-account-system.js
```

预期输出：
- 总测试数：16
- 通过：16
- 失败：0
- 通过率：100%
